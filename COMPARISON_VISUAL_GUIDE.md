# Price Comparison Feature - Visual Guide

## ğŸ“ Feature Locations

### 1. App Bar (Top of Product Page)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  < Product Name          [âš–ï¸] [ğŸ›’]              â”‚  â† App Bar Actions
â”‚                          2   5                   â”‚  â† Badge counts
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš–ï¸  = Compare Icon (green badge shows count)
ğŸ›’  = Shopping Cart Icon (coral badge shows count)
```

### 2. "Add to Compare" Button (Below Buy Now)

#### Before Adding to Compare:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add to Cart (Blue)     â”‚  Buy Now (Green)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš–ï¸] Add to Compare (Blue, Full Width)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### After Adding to Compare:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add to Cart (Blue)     â”‚  Buy Now (Green)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âœ“] Remove from Compare (Orange, Full Width)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Comparison Modal (Dialog/Popup)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Compare Products                                    [âœ•]  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                           â•‘
â•‘  Product  â”‚ Shop    â”‚ Price  â”‚ MRP  â”‚ Discount â”‚ Stock â”‚Rmâ•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â•‘
â•‘ Product A â”‚ Shop 1  â”‚ â‚¹399   â”‚ â‚¹599 â”‚  -33%    â”‚ Stock â”‚ğŸ—‘ â•‘
â•‘ Product B â”‚ Shop 2  â”‚ â‚¹449   â”‚ â‚¹599 â”‚  -25%    â”‚ Stock â”‚ğŸ—‘ â•‘
â•‘ Product C â”‚ Shop 3  â”‚ â‚¹499   â”‚ â‚¹599 â”‚  -17%    â”‚ Out   â”‚ğŸ—‘ â•‘
â•‘                                                           â•‘
â•‘                    [Close Comparison]                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ¯ User Flow

### Scenario 1: Adding Products to Compare

```
User Views Product Page
       â†“
[Click "Add to Compare"]
       â†“
âœ“ Button changes to "Remove from Compare" (Orange)
âœ“ Compare badge appears in app bar showing "1"
âœ“ SnackBar confirms: "Added to compare"
       â†“
[Click "Add to Compare" on second product]
       â†“
âœ“ Compare badge updates to "2"
       â†“
[Click Compare Icon in App Bar]
       â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Comparison Modal Opens            â•‘
â•‘  Shows: Product A vs Product B     â•‘
â•‘  With: Price, MRP, Discount, Stock â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Scenario 2: Reaching Maximum Limit

```
User has 3 products in comparison
       â†“
[Try to add 4th product]
       â†“
âœ— SnackBar Error: "Maximum 3 products can be compared"
âœ— Product NOT added
âœ“ Button remains "Add to Compare"
```

### Scenario 3: Removing from Comparison

```
User in Comparison Modal
       â†“
[Click ğŸ—‘ button next to a product]
       â†“
âœ“ Product removed
âœ“ Modal closes then reopens (auto-refresh)
âœ“ Only 2 products now visible
âœ“ Badge in app bar updates to "2"
```

## ğŸ¨ Color Scheme

| Element | Color | Hex Code |
|---------|-------|----------|
| "Add to Compare" Button | Primary Blue | #1F6FEB |
| "Remove from Compare" Button | Orange | #FF9500 |
| Compare Badge | Success Green | #23B26D |
| Cart Badge | Coral/Accent | #FF6B5A |
| Price (in table) | Success Green | #23B26D |
| Out of Stock | Red | #FF0000 |
| MRP (strikethrough) | Gray | #808080 |

## ğŸ“Š Data Table Columns

| Column | Format | Example |
|--------|--------|---------|
| Product | Text (ellipsis if long) | "Samsung Galaxy..." |
| Shop | Text | "TechStore" |
| Price | Currency | "â‚¹399" |
| MRP | Currency + strikethrough | "~~â‚¹599~~" |
| Discount | Percentage or "No" | "-33%" or "No" |
| Stock | "In Stock" or "Out of Stock" | "In Stock" |
| Action | Delete Icon | ğŸ—‘ï¸ |

## ğŸ”” Notifications & Feedback

### Success Messages
- âœ“ "Added to compare" (1 second)
- âœ“ "Removed from compare" (1 second)

### Error Messages
- âœ— "Maximum 3 products can be compared at once"
- âœ— "Please log in to use compare feature"
- âœ— "No products to compare" (when clicking empty compare icon)

## ğŸ“± Responsive Behavior

### Mobile (< 600px)
- Full-width buttons
- Table scrolls horizontally in modal
- Smaller font sizes
- Touch-friendly (48px minimum height)

### Tablet (600px - 1000px)
- Side-by-side buttons (Add to Cart & Buy Now)
- "Add to Compare" below
- Table fits with horizontal scroll
- Comfortable spacing

### Desktop (> 1000px)
- All buttons visible and well-spaced
- Table fully visible or minimal scroll
- Larger fonts
- More whitespace

## ğŸ’¾ Data Persistence

### When Comparison List is Saved
1. âœ“ When product is added via "Add to Compare"
2. âœ“ When product is removed via modal
3. âœ“ When product is removed via page button

### What Gets Stored in Database
```javascript
{
  customerId: "user_123",
  items: [
    {
      productId: "prod_456",
      shopId: "shop_789",
      name: "Product Name",
      shopName: "Shop Name",
      price: 399.99,
      mrp: 599.99,
      discount: 33,
      stock: 10,
      inStock: true
    }
    // ... up to 3 items
  ],
  createdAt: "2026-01-10T...",
  updatedAt: "2026-01-10T..."
}
```

## âš¡ Performance Optimizations

1. **Lazy Loading**: Comparison list fetched on page init only
2. **Caching**: Compare list cached in `_compareList` variable
3. **Minimal Re-renders**: Only updates when list changes
4. **Efficient Checks**: Uses `.any()` to check product status
5. **Automatic Refresh**: Modal auto-closes and reopens after changes

## ğŸ›¡ï¸ Validation Rules

| Check | Rule | Result |
|-------|------|--------|
| Max Products | 3 items max | Error if exceeding |
| Duplicates | Same (product + shop) | Skip if already exists |
| Login | Must be logged in | Error if not authenticated |
| Stock | Out of stock allowed | Button disabled but can compare |
| Product Exists | Valid productId required | Error if not found |

## ğŸ”— API Integration Points

### Frontend Makes These Calls:
1. `GET /api/compare?customerId=X` - Fetch list on page load
2. `POST /api/compare` - Add product (body: customerId, productId, shopId)
3. `DELETE /api/compare/:productId?customerId=X&shopId=Y` - Remove product

### Frontend Expects These Responses:
- Status 200/201 for success
- Status 400 for validation errors
- Status 404 for not found
- JSON with error message on failure

## âœ… Feature Checklist for Implementation

- [ ] Backend implements GET `/api/compare` endpoint
- [ ] Backend implements POST `/api/compare` endpoint  
- [ ] Backend implements DELETE `/api/compare/:productId` endpoint
- [ ] Database has Compare collection/model
- [ ] Max 3 products validation on backend
- [ ] Duplicate check on backend
- [ ] Test adding 1, 2, 3 products
- [ ] Test error when adding 4th product
- [ ] Test remove via modal
- [ ] Test remove via button
- [ ] Test page refresh (persistence)
- [ ] Test with multiple users
- [ ] Test with out-of-stock products
